require "rails_helper"

require_relative "../../app/helpers/discord_helper"

exp_table = [
  [0, 100],
  [1, 155],
  [2, 220],
  [3, 295],
  [4, 380],
  [5, 475],
  [6, 580],
  [7, 695],
  [8, 820],
  [9, 955],
  [10, 1100],
  [11, 1255],
  [12, 1420],
  [13, 1595],
  [14, 1780],
  [15, 1975],
  [16, 2180],
  [17, 2395],
  [18, 2620],
  [19, 2855],
  [20, 3100],
  [21, 3355],
  [22, 3620],
  [23, 3895],
  [24, 4180],
  [25, 4475],
  [26, 4780],
  [27, 5095],
  [28, 5420],
  [29, 5755],
  [30, 6100],
  [31, 6455],
  [32, 6820],
  [33, 7195],
  [34, 7580],
  [35, 7975],
  [36, 8380],
  [37, 8795],
  [38, 9220],
  [39, 9655],
  [40, 10_100],
  [41, 10_555],
  [42, 11_020],
  [43, 11_495],
  [44, 11_980],
  [45, 12_475],
  [46, 12_980],
  [47, 13_495],
  [48, 14_020],
  [49, 14_555],
  [50, 15_100],
  [51, 15_655],
  [52, 16_220],
  [53, 16_795],
  [54, 17_380],
  [55, 17_975],
  [56, 18_580],
  [57, 19_195],
  [58, 19_820],
  [59, 20_455],
  [60, 21_100],
  [61, 21_755],
  [62, 22_420],
  [63, 23_095],
  [64, 23_780],
  [65, 24_475],
  [66, 25_180],
  [67, 25_895],
  [68, 26_620],
  [69, 27_355],
  [70, 28_100],
  [71, 28_855],
  [72, 29_620],
  [73, 30_395],
  [74, 31_180],
  [75, 31_975],
  [76, 32_780],
  [77, 33_595],
  [78, 34_420],
  [79, 35_255],
  [80, 36_100],
  [81, 36_955],
  [82, 37_820],
  [83, 38_695],
  [84, 39_580],
  [85, 40_475],
  [86, 41_380],
  [87, 42_295],
  [88, 43_220],
  [89, 44_155],
  [90, 45_100],
  [91, 46_055],
  [92, 47_020],
  [93, 47_995],
  [94, 48_980],
  [95, 49_975],
  [96, 50_980],
  [97, 51_995],
  [98, 53_020],
  [99, 54_055],
  [100, 55_100]
]

describe "ExpHelperSpec" do
  logger = SemanticLogger['ExpHelperSpec']

  it "calculates exp_to_next_level correctly" do
    exp_table.each do |e|
      logger.info("Testing level", level: e)
      expect(DiscordHelper.exp_to_next_level?(e[0])).to equal(e[1])
    end
  end
end
